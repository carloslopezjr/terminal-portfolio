<!-- <!doctype html>
<html lang="en" translate="no" class="notranslate">
<head>
  <meta charset="utf-8" />
  <meta name="google" content="notranslate" />
  <meta http-equiv="Content-Language" content="en" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Terminal Portfolio</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <script>
    (function(){
      try {
        var ua = navigator.userAgent || '';
        var isMobileUA = /Mobi|Android|iPhone|iPad|iPod|Mobile/i.test(ua);
        var narrow = window.matchMedia && window.matchMedia('(max-width:700px)').matches;
        // allow ?view=desktop to bypass redirect
        var params = new URLSearchParams(window.location.search);
        if(!params.has('view') || params.get('view') !== 'desktop'){
          if(isMobileUA || narrow){
            // Redirect to simplified mobile view (non-terminal)
            window.location.replace('mobile.html');
          }
        }
      } catch(e) { /* ignore */ }
    })();
  </script>
  <main id="terminal" class="terminal" tabindex="0" aria-label="Terminal Portfolio">
    <div id="output" class="output" aria-live="polite"></div>

    Prompt line: contenteditable span used for input so we can style cursor precisely
    <div id="prompt" class="prompt-line">
      <span class="prompt">carlos@portfolio:~$</span>
      <span id="cmd" class="cmd" contenteditable="true" spellcheck="false" role="textbox" aria-label="Command input"></span>
      <span id="cursor" class="cursor">▉</span>
    </div>

    <div id="screen-overlay" class="screen-overlay" aria-hidden="true"></div>
  </main>

  <script src="data.js"></script>
  <script src="script.js"></script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en" translate="no" class="notranslate">
  <head>
    <meta charset="utf-8" />
    <meta name="google" content="notranslate" />
    <meta http-equiv="Content-Language" content="en" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Carlos — Portfolio</title>
    <script>
      // Inject CSS with a cache-busting query param so browsers always fetch the latest file.
      (function () {
        var css = "mobile.css";
        var l = document.createElement("link");
        l.rel = "stylesheet";
        l.href = css + "?v=" + Date.now();
        document.head.appendChild(l);
      })();
    </script>
  </head>
  <body>
    <main class="mobile" role="main">
      <div class="terminal-like">
        <div class="line title">carlos@portfolio:~$</div>

        <div class="section">
          <div class="line section-title">About</div>
          <div id="mobile-about" class="line"></div>
        </div>

        <div class="section">
          <div class="line section-title">Experience</div>
          <div id="mobile-experience"></div>
        </div>

        <div class="section">
          <div class="line section-title">Involvement</div>
          <div id="mobile-involvement"></div>
        </div>

        <div class="section">
          <div class="line section-title">Education</div>
          <div id="mobile-education"></div>
        </div>

        <div class="section">
          <div class="line section-title">Projects</div>
          <div id="mobile-project-list"></div>
        </div>

        <div class="section">
          <div class="line section-title">Contact</div>
          <div id="mobile-contact" class="line"></div>
        </div>

        <!-- <div class="line muted small">Tip: tap links to open. Want the interactive terminal? <a class="terminal-link" href="/?view=desktop">Open desktop view</a></div> -->
      </div>
    </main>

    <script>
      (function () {
        function mkLine(text) {
          const d = document.createElement("div");
          d.className = "line";
          d.innerHTML = text;
          return d;
        }

        function runRender() {
          const projRoot = document.getElementById("mobile-project-list");
          (window.PROJECTS || []).forEach((p) => {
            projRoot.appendChild(
              mkLine(
                `<strong>${p.title}</strong> — ${
                  p.description
                } <a class="terminal-link" href="${
                  p.repo
                }" target="_blank">Repo</a> <a class="terminal-link" href="${
                  p.demo || "#"
                }" target="_blank">Demo</a>`
              )
            );
          });

          const aboutRoot = document.getElementById("mobile-about");
          if (aboutRoot) {
            const a = window.ABOUT || {};
            aboutRoot.innerHTML = `${a.summary || ""}`;
          }

          const contactRoot = document.getElementById("mobile-contact");
          if (contactRoot) {
            const c = window.CONTACT || {};
            let html = "";
            (c.links || []).forEach((l) => {
              html += `<a class="terminal-link" href="${l.url}" target="_blank">${l.label}</a> `;
            });
            contactRoot.innerHTML = html || "—";
          }

          const expRoot = document.getElementById("mobile-experience");
          (window.EXPERIENCES || []).forEach((e) => {
            expRoot.appendChild(
              mkLine(`<strong>${e.company}</strong> — ${e.title} (${e.period})`)
            );
            (e.bullets || []).forEach((b) =>
              expRoot.appendChild(mkLine(`&nbsp;&nbsp;- ${b}`))
            );
          });

          const invRoot = document.getElementById("mobile-involvement");
          (window.INVOLVEMENT || []).forEach((i) => {
            const header =
              `<strong>${i.org}</strong> — ${i.role}` +
              (i.url
                ? ` <a class="terminal-link" href="${i.url}" target="_blank">Link</a>`
                : "");
            invRoot.appendChild(mkLine(header));
            invRoot.appendChild(mkLine(`${i.details}`));
          });

          const eduRoot = document.getElementById("mobile-education");
          (window.EDUCATION || []).forEach((ed) => {
            eduRoot.appendChild(
              mkLine(
                `<strong>${ed.school}</strong> — ${ed.degree} (${ed.period})`
              )
            );
            if (ed.notes) eduRoot.appendChild(mkLine(`${ed.notes}`));
          });
        }

        var s = document.createElement("script");
        s.src = "data.js?v=" + Date.now();
        s.onload = runRender;
        s.onerror = function () {
          console.warn("Failed to load data.js");
          runRender();
        };
        document.head.appendChild(s);
      })();
    </script>
  </body>
</html>
